{
  "permissions": {
    "allow": [
      "Bash(mkdir:*)",
      "Bash(npx vercel-deploy-source-downloader:*)",
      "Bash(git checkout:*)",
      "Bash(npm run dev:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git push)",
      "Bash(npx vercel:*)",
      "Bash(npm install:*)",
      "Bash(npm run build:*)",
      "Bash(vercel --version:*)",
      "Bash(curl:*)",
      "Bash(git merge:*)",
      "Bash(git push:*)",
      "Bash(.venv/Scripts/python:*)",
      "Bash(wc:*)",
      "Bash(ls -la \"c:\\\\vibe\\\\xtal-site\\\\src\\\\components\"\" 2>/dev/null || echo \"Directory not found \")",
      "Bash(npx next build:*)",
      "Bash(ls:*)",
      "Bash(gh pr create --base main --head feat/normalize-facet-tags --title \"Add facet tag normalization, query enhancement toggle, and explain prompt override\" --body \"$\\(cat <<''EOF''\n## Summary\n- **Facet tag normalization**: CLI and enhanced extraction prompt for consistent facet tags\n- **Collection-aware settings**: Query enhancement toggle with per-collection vendor settings\n- **2+1 RRF marketing boost**: Marketing prompt embedded as third RRF factor alongside user intent hybrid search\n- **Explain prompt override**: `system_prompt` field on explain API so admin panel can customize \"Why This Result\" tone\n\n## Commits\n- `ff2c062` Add normalize-facet-tags CLI and enhanced extraction prompt\n- `775c1b6` Add collection-aware settings, query enhancement toggle, and 2+1 RRF marketing boost\n- `d937af2` Add system_prompt override to explain API\n\n## Test plan\n- [ ] Verify facet tag extraction produces normalized tags\n- [ ] Toggle query enhancement off in admin, confirm search uses raw queries\n- [ ] Test marketing prompt RRF factor with seasonal/geo context\n- [ ] Call `/explain` with custom `system_prompt`, verify explanation uses it\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\nEOF\n\\)\")",
      "Bash(npx tsc:*)",
      "Bash(.venv/Scripts/python.exe:*)",
      "Bash(gh pr create --title \"Add demo ingestion pipeline with CSV converter and BatchPipeline\" --body \"$\\(cat <<''EOF''\n## Summary\n- **Demo ingestion endpoint** \\(`POST /api/demo/ingest`\\): accepts Shopify CSV upload via multipart form, runs background task with TaskManager for progress polling. Stages: CSV parse â†’ XTAL convert â†’ Qdrant collection create â†’ BatchPipeline \\(AI enhance + embed + upsert\\)\n- **ShopifyCSVConverter**: parses flat Shopify CSV exports \\(one row per variant\\) into nested ShopifyProduct Pydantic models. Groups by handle, maps Option1/2/3 columns, dedupes images, handles multi-encoding fallback\n- **BatchPipeline**: concurrent AI enhancement \\(semaphore=10\\), batched OpenAI embeddings \\(50/call\\), batched Qdrant upserts â€” 10-20x faster than sequential ingestion with progress callbacks\n- **Amazon & Best Buy converters**: multi-source to-XTAL converters for CLI ingestion commands\n\n## Test plan\n- [ ] Upload a Shopify CSV via `POST /api/demo/ingest` and verify task progress polling\n- [ ] Verify ShopifyCSVConverter handles Willow CSV \\(2,272 products, all convert\\)\n- [ ] Verify BatchPipeline processes products with AI enhancement \\(skip_ai=False\\)\n- [ ] Verify demo task status endpoint returns progress, completion stats, and errors\n- [ ] Verify existing CLI commands \\(`ingest-amazon-fast`, `ingest-bestbuy`\\) still work\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\nEOF\n\\)\" --base main)",
      "Bash(gh api:*)",
      "Bash(python -m base64:*)",
      "Bash(node -e:*)",
      "Bash(COGNITO_CLIENT_ID=\"3o1u10m3enqr91099t78h7nc4q\")",
      "Bash(COGNITO_CLIENT_SECRET=\"8p20c8qp6elpqtigcdq4hvp27be7g1udep5n5884u0qvnjb04t3\")",
      "Bash(printf:*)",
      "Bash(base64:*)",
      "Bash(TOKEN=\"eyJraWQiOiI2bjQzNWcxeitLaVorK3ZcLys1amNUT3B0ZVQ4MTZsN0hhQjdjSTFFUTZURT0iLCJhbGciOiJSUzI1NiJ9.eyJzdWIiOiIzbzF1MTBtM2VucXI5MTA5OXQ3OGg3bmM0cSIsInRva2VuX3VzZSI6ImFjY2VzcyIsInNjb3BlIjoiYmFja2VuZC1hcGktZGV3aW5lLWRldlwvcmVhZCIsImF1dGhfdGltZSI6MTc3MTI4MzE5NiwiaXNzIjoiaHR0cHM6XC9cL2NvZ25pdG8taWRwLnVzLWVhc3QtMS5hbWF6b25hd3MuY29tXC91cy1lYXN0LTFfVEwyM2JVa0FTIiwiZXhwIjoxNzcxMjg2Nzk2LCJpYXQiOjE3NzEyODMxOTYsInZlcnNpb24iOjIsImp0aSI6IjY3NGZmYWQ5LWJmMDUtNGEyZi05ZmYwLThkOTUyZDYyMmU0NiIsImNsaWVudF9pZCI6IjNvMXUxMG0zZW5xcjkxMDk5dDc4aDduYzRxIn0.KoHeCxrOwLYFO6hSuIlObeRQJLjt0cVTnSboz0tERTToqEvPuFOntHb_n_hdux_xJtBBNFBso481Z9qfUCrnPHNei82FxqnXx-bStkDCIfJW__4_iU1_nevAixEHOcoXArxnUAhL0GBh5AogUe-VQ51rmOIMYpcpLaygzL1JgbOhC9mmWx16aUmi4gMZgjfGAwchokb2Sc5g6NeNfSJZjkGeyDWGRxVMJCHAiplzGnm3WWzZ75S4WiF12gahBika9VmXxVRvxB0ZbA75DLC8wEXd943wAboie4H2jBzS-dKkMwA4JK0JclhMSIc2qA1qdcc9pzNYSLtZB3FPjOmGrg\")",
      "Bash(gh repo view:*)",
      "WebFetch(domain:github.com)",
      "Bash(git status:*)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "Bash(npm run build:client)"
    ],
    "deny": [],
    "ask": []
  }
}
